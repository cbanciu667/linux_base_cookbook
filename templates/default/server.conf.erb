# OpenVPN server configuration file
# Generated by Chef - local changes will be overwritten!

# Please refer to the OpenVPN documentation for details on
# configuration settings.

<% node['openvpn']['config'].sort.each do |key, value| %>
<% next if value.nil? -%>
<%= key %> <%=
  case value
  when String
    value
  when TrueClass
    1
  when FalseClass
    0
  else
    value
  end
%>
<% end %>
<% @routes.to_a.each do |value| %>
<% next if value.nil? -%>
push "route <%= value %>"
<% end %>
<% if ( node["openvpn"].attribute?("dns_server") && ! node["openvpn"]["dns_server"].nil? ) %>
push "dhcp-option DNS <%= node["openvpn"]["dns_server"] %>"
<% end %>
<% if ( node["openvpn"].attribute?("wins_server") && ! node["openvpn"]["wins_server"].nil? ) %>
push "dhcp-option WINS <%= node["openvpn"]["wins_server"] %>"
<% end %>
